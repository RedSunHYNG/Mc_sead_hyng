#(商人特殊个体,赦免名)：sr_tst
#商人召唤需要等级与等级系统绑定
function sr:srmode
function sr:srtype

#商人巡回广播面板
scoreboard players enable @a sr_steam

#广播
scoreboard players add @a sr_time 1
tellraw @a[scores={sr_time=1}] [{"text":"点击本句话中商人名字来生成商人：","color":"gold"},{"text":"钱桩商人","color":"aqua","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"clickEvent":{"action":"run_command","value":"/trigger sr_steam set 1"}},{"text":"基础商人","color":"green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"clickEvent":{"action":"run_command","value":"/trigger sr_steam set 2"}},{"text":"幸运商人","color":"red","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"clickEvent":{"action":"run_command","value":"/trigger sr_steam set 3"}}]
tellraw @a[scores={sr_time=2}] [{"text":"模组补偿商人","color":"gold"},{"text":"狙击枪军火商","color":"aqua","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false,"clickEvent":{"action":"run_command","value":"/trigger sr_steam set 4"}}]
scoreboard players set @a[scores={sr_time=10000..}] sr_time 0

#商人清理
scoreboard players add @e[tag=sr_steam,type=minecraft:villager] sr_time 1
kill @e[tag=sr_steam,type=minecraft:villager,scores={sr_time=1000..}]

#"sr_steam","sr_tst","sr_name1","sr_name2","sr_name3"
#Name 钱币/钱锭 money
#商人生成
execute as @a[scores={sr_steam=1}] at @s run summon minecraft:villager ~ ~1 ~ {CustomName:'[{"text":"钱庄商人","color":"gold"}]',Tags:["sr_steam","sr_tst","sr_name1"],CustomNameVisible:1b,Glowing:1b,NoAI:1b,Invulnerable:1b,NoGravity:1b,Offers:{Recipes:[{maxUses:99,uses:0,buy:{id:"minecraft:stone",Count:24b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:rotten_flesh",Count:8b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:emerald",Count:2b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:diamond",Count:1b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:32b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:brick",Count:1b,tag:{display:{Name:'[{"text":"钱锭"}]'},Tags:["money"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:brick",Count:1b,tag:{display:{Name:'[{"text":"钱锭"}]'},Tags:["money"]}},sell:{id:"minecraft:paper",Count:32b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}}}]}}
execute as @a[scores={sr_steam=2}] at @s run summon minecraft:villager ~ ~1 ~ {CustomName:'[{"text":"初级商人","color":"gold"}]',Tags:["sr_steam","sr_tst","sr_name2"],CustomNameVisible:1b,Glowing:1b,NoAI:1b,Invulnerable:1b,NoGravity:1b,Offers:{Recipes:[{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:experience_bottle",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:2b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:iron_ingot",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:4b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:white_bed",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:5b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:soul_campfire",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:6b,tag:{display:{Name:'[{"text":"钱币"}]'},Tags:["money"]}},sell:{id:"minecraft:diamond",Count:1b}}]}}

#随机商人
execute as @a[scores={sr_steam=3,level=..24}] at @s run tellraw @s [{"text":"等级不够","color":"gold"}]
execute as @a[scores={sr_steam=3,level=25..}] at @s run function sr:summon_sr
#模组补偿
execute as @a[scores={sr_steam=4}] at @s unless block ~ ~ ~ tac:workbench unless block ~ ~-1 ~ tac:workbench run tellraw @s [{"text":"需要脚下为枪械工作台","color":"gold"}]
execute as @a[scores={sr_steam=4}] at @s if block ~ ~ ~ tac:workbench run summon minecraft:villager ~ ~ ~ {CustomName:'[{"text":"狙击枪军火商","color":"gold"}]',Tags:["sr_steam","sr_tst","sr_name4"],CustomNameVisible:1b,Glowing:1b,NoAI:1b,Invulnerable:1b,NoGravity:1b,Offers:{Recipes:[{maxUses:99,uses:0,buy:{id:"minecraft:iron_ingot",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:netherite_ingot",Count:2b},buyB:{id:"minecraft:diamond",Count:16b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_1"}]'},Tags:["M82A3_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:30b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:gold_ingot",Count:60b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_2"}]'},Tags:["M82A3_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_1"}]'},Tags:["M82A3_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_2"}]'},Tags:["M82A3_2"]}},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_组合3"}]'},Tags:["M82A3_3"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_组合3"}]'},Tags:["M82A3_3"]}},buyB:{id:"minecraft:nether_star",Count:1b},sell:{id:"tac:m82a2",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:50b},buyB:{id:"minecraft:diamond",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_1"}]'},Tags:["awm_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:25b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:5b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_2"}]'},Tags:["awm_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_1"}]'},Tags:["awm_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_2"}]'},Tags:["awm_2"]}},sell:{id:"tac:ai_awp",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:24b},buyB:{id:"minecraft:diamond",Count:4b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_1"}]'},Tags:["mk20_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:17b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:2b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_2"}]'},Tags:["mk20_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_1"}]'},Tags:["mk20_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_2"}]'},Tags:["mk20_2"]}},sell:{id:"tac:scar_mk20",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:2b},buyB:{id:"minecraft:lapis_lazuli",Count:16b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"m24_1"}]'},Tags:["m24_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:7b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"m24_1"}]'},Tags:["m24_1"]}},sell:{id:"tac:m24",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:50b},buyB:{id:"minecraft:diamond",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_1"}]'},Tags:["mrad_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:25b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:5b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_2"}]'},Tags:["mrad_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_1"}]'},Tags:["mrad_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_2"}]'},Tags:["mrad_2"]}},sell:{id:"tac:mrad",Count:1b}}]}}
execute as @a[scores={sr_steam=4}] at @s if block ~ ~-1 ~ tac:workbench run summon minecraft:villager ~ ~ ~ {CustomName:'[{"text":"狙击枪军火商","color":"gold"}]',Tags:["sr_steam","sr_tst","sr_name4"],CustomNameVisible:1b,Glowing:1b,NoAI:1b,Invulnerable:1b,NoGravity:1b,Offers:{Recipes:[{maxUses:99,uses:0,buy:{id:"minecraft:iron_ingot",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:netherite_ingot",Count:2b},buyB:{id:"minecraft:diamond",Count:16b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_1"}]'},Tags:["M82A3_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:30b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:gold_ingot",Count:60b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_2"}]'},Tags:["M82A3_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_1"}]'},Tags:["M82A3_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_2"}]'},Tags:["M82A3_2"]}},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_组合3"}]'},Tags:["M82A3_3"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"M82A3_组合3"}]'},Tags:["M82A3_3"]}},buyB:{id:"minecraft:nether_star",Count:1b},sell:{id:"tac:m82a2",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:50b},buyB:{id:"minecraft:diamond",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_1"}]'},Tags:["awm_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:25b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:5b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_2"}]'},Tags:["awm_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_1"}]'},Tags:["awm_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"awm_2"}]'},Tags:["awm_2"]}},sell:{id:"tac:ai_awp",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:24b},buyB:{id:"minecraft:diamond",Count:4b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_1"}]'},Tags:["mk20_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:17b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:2b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_2"}]'},Tags:["mk20_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_1"}]'},Tags:["mk20_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mk20_2"}]'},Tags:["mk20_2"]}},sell:{id:"tac:scar_mk20",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:2b},buyB:{id:"minecraft:lapis_lazuli",Count:16b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"m24_1"}]'},Tags:["m24_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:7b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"m24_1"}]'},Tags:["m24_1"]}},sell:{id:"tac:m24",Count:1b}},{maxUses:99,uses:0,buy:{id:"minecraft:gold_ingot",Count:50b},buyB:{id:"minecraft:diamond",Count:10b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_1"}]'},Tags:["mrad_1"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:25b,tag:{display:{Name:'[{"text":"枪械通用组件"}]'},Tags:["iron_1"]}},buyB:{id:"minecraft:blaze_rod",Count:5b},sell:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_2"}]'},Tags:["mrad_2"]}}},{maxUses:99,uses:0,buy:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_1"}]'},Tags:["mrad_1"]}},buyB:{id:"minecraft:paper",Count:1b,tag:{display:{Name:'[{"text":"mrad_2"}]'},Tags:["mrad_2"]}},sell:{id:"tac:mrad",Count:1b}}]}}
scoreboard players set @a sr_steam 0
